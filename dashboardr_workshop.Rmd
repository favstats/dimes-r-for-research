---
title: "dashboardr Workshop - Day 1"
subtitle: "Building Beautiful Interactive Dashboards in R"
author: '<br><br><br><br>Fabio Votta <br><br> <a href="http://github.com/favstats"><i class="fa fa-github fa-fw"></i>&nbsp;favstats</a> <br> <a href="https://twitter.com/favstats"> <i class="fa fa-twitter fa-fw"></i>&nbsp;@favstats</a> <br> <a href="http://www.favstats.eu/"><i class="fa fa-address-card"></i>&nbsp; www.favstats.eu</a><br> <a href="https://favstats.github.io/dashboardr/"><i class="fa fa-paper-plane fa-fw"></i>&nbsp;favstats.github.io/dashboardr</a> <br><br>`r Sys.Date()`'
output:
  xaringan::moon_reader:
    lib_dir: libs
    css: [default, custom.css]
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
      ratio: "16:9"
      slideNumberFormat: "%current%<br>"
    includes:
      in_header: header.html
    seal: true
---

<style>
.onehundredtwenty {
  font-size: 120%;
}

.ninety {
  font-size: 90%;
}

.eightyfive {
  font-size: 85%;
}
   
.eighty {
  font-size: 80%;
}
   
.seventyfive {
  font-size: 75%;
}
   
.seventy {
  font-size: 70%;
}
   
.sixty {
  font-size: 60%;
}

.fivty {
  font-size: 50%;
}

.small-code .remark-code {
  font-size: 70%;
}

.tiny-code .remark-code {
  font-size: 60%;
}
</style>

```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
knitr::opts_chunk$set(
  fig.width = 10,
  fig.height = 5,
  fig.retina = 2,
  warning = FALSE,
  message = FALSE,
  echo = TRUE,
  eval = FALSE,
  comment = "#>"
)

# Load packages
library(dashboardr)
library(highcharter)
library(dplyr)

# Create sample data for demos
set.seed(42)
survey_data <- data.frame(
  age = round(rnorm(500, mean = 42, sd = 15)),
  income = round(rnorm(500, mean = 55000, sd = 20000)),
  satisfaction = sample(1:5, 500, replace = TRUE, prob = c(0.05, 0.1, 0.2, 0.35, 0.3)),
  department = sample(c("Sales", "Engineering", "Marketing", "HR", "Finance"), 500, replace = TRUE),
  region = sample(c("North", "South", "East", "West"), 500, replace = TRUE),
  wave = sample(1:3, 500, replace = TRUE),
  year = sample(2018:2024, 500, replace = TRUE)
)
```

### It gets easier, I promise!

```{r, echo = FALSE, eval = TRUE, out.width = "50%", fig.align = "center"}
knitr::include_graphics("https://cdn.myportfolio.com/45214904-6a61-4e23-98d6-b140f8654a40/dbb57803-0c35-4b92-b19f-453d28ef4b20_rw_1920.png?h=8b25ac0adef09e18b3a8d258a7e57b56")
```

.fivty[Illustration by [Allison Horst](https://twitter.com/allison_horst)]

--

+ My experience: this stuff isn't super easy at first... but it gets better!
+ Great documentation and an active community to help you along!

---

class: inverse, center, middle

# Welcome to dashboardr! 

## From Zero to Published Dashboard

![](https://media.giphy.com/media/l0MYt5jPR6QX5pnqM/giphy.gif)

---

# What We'll Cover Today (Day 1)

.pull-left[
### Part 1: Foundations
- What is dashboardr?
- The "Grammar of Dashboards"
- Core workflow

### Part 2: Visualizations
- All 9 chart types
- Smart defaults & overrides
- Filters, weights, binning
]

.pull-right[
### Part 3: Content & Layout
- Text, callouts, value boxes
- Tabgroups & hierarchies
- Basic inputs overview

### Part 4: Quick Start
- Themes preview
- First dashboard creation
- Q&A
]

--

.center[
.key-point[
**Day 2** covers advanced topics: interactive inputs, deep theming, publishing, and best practices!
]
]

---

class: inverse, center, middle

# Part 1: Foundations
## Understanding dashboardr

---

# What is dashboardr?

### A package for creating **static, interactive dashboards**

.pull-left[
**The Problem:**
- Data to share (surveys, analytics)
- Shiny = server overhead
- Static reports = boring
- Manual HTML = tedious
]

.pull-right[
**The Solution:**
- Quarto-powered dashboards
- **Pre-rendered HTML**
- **Interactive Highcharts**
- **No server required**
]

---

# The Restaurant Analogy

.analogy[
**Shiny** = Full-service restaurant with a chef

*Every order cooked fresh. Unlimited possibilities, but needs constant attention.*

**dashboardr** = Gourmet food truck

*Meals prepared in advance. Served instantly. No kitchen needed on-site.*
]

| Approach | Server Needed | Load Speed | Flexibility |
|----------|---------------|------------|-------------|
| **Shiny** | âœ… Yes, 24/7 | Slower | Unlimited |
| **dashboardr** | âŒ No | Instant | Pre-defined |

---

# When to Use dashboardr

.pull-left[
### âœ… Perfect For:

- ğŸ“Š Survey Results
- ğŸ“ˆ Analytics Reports  
- ğŸ“ Research Presentations
- ğŸ“° Data Journalism
- ğŸ’¼ Client Deliverables
]

.pull-right[
### âŒ Not Ideal For:

- Real-time data streams
- User-specific views
- Complex calculations
- Database writes
]

---

# The Grammar of Dashboards

.center[
### Just as ggplot2 gave us a **grammar of graphics**...
### dashboardr provides a **grammar of dashboards**
]

.diagram[
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DATA  â”‚ + â”‚VISUALIZATIONS â”‚ + â”‚ LAYOUT â”‚ + â”‚ NAVIGATION â”‚ + â”‚ STYLING â”‚ = DASHBOARD
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
]

---

# The LEGO Analogy

.analogy[
Each component is a **brick**. Snap them together to build your dashboard.

- Same bricks â†’ different structures
- Predictable behavior  
- Easy to modify and extend
]

.center[
### ğŸ§± + ğŸ§± + ğŸ§± = ğŸ 
]

---

# The Core Workflow

.center[
## Every dashboard follows **three steps**
]

.diagram[
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 1: BUILD  â”‚  -->  â”‚ STEP 2: ASSEMBLEâ”‚  -->  â”‚ STEP 3: GENERATEâ”‚
â”‚                 â”‚       â”‚                 â”‚       â”‚                 â”‚
â”‚  create_viz()   â”‚       â”‚ create_dashboardâ”‚       â”‚generate_dashboard
â”‚  add_viz()      â”‚       â”‚ add_page()      â”‚       â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
]

---

# Installation

```{r}
# Install pak (package manager)
install.packages("pak")

# Install dashboardr from GitHub
pak::pak("favstats/dashboardr")
```

```{r}
# Load packages
library(dashboardr)
library(dplyr)
```

.tip[
Also install Quarto CLI: https://quarto.org/docs/get-started/
]

---

# Verify Installation

```{r}
test <- create_dashboard("test", "test_output")
```

.output-box[
Dashboard project initialized at: test_output
]

.note[
If you see this message, you're ready to go!
]

---

# Your First Dashboard in 60 Seconds

```{r}
library(dashboardr)

# 1. Create visualizations
viz <- create_viz(type = "histogram") %>%
  add_viz(x_var = "mpg", title = "MPG Distribution")

# 2. Create dashboard
dashboard <- create_dashboard(
  title = "My First Dashboard",
  output_dir = "my_dashboard"
) %>%
  add_page("Analysis", data = mtcars, visualizations = viz)

# 3. Generate!
generate_dashboard(dashboard, render = TRUE, open = "browser")
```

---

# What Just Happened?

.output-box[
Dashboard project initialized at: my_dashboard
Generating page: Analysis
Writing: my_dashboard/analysis.qmd
Rendering dashboard...
âœ“ Dashboard generated successfully!
Opening in browser...
]

.key-point[
With **7 lines of code**, you created a complete interactive dashboard!
]

---

class: inverse, center, middle

# Step 1: Building Visualizations
## The Foundation

---

# The Template Analogy

.analogy[
Think of `create_viz()` as a **document template**:

- Set fonts, colors, margins **once**
- Every new document (`add_viz`) inherits these
- Override specific settings when needed
]

---

# create_viz() + add_viz() Pattern

```{r}
# Create a TEMPLATE with defaults
my_viz <- create_viz(
* type = "histogram",
* color_palette = c("#3498DB"),
* bins = 30
)
```

```{r}
# Add individual charts (inherit defaults)
my_viz <- my_viz %>%
  add_viz(x_var = "age", title = "Age Distribution") %>%
  add_viz(x_var = "income", title = "Income Distribution") %>%
* add_viz(x_var = "score", title = "Score", bins = 50)  # Override!
```

---

# See the Result: print()

```{r print-viz-demo, eval=TRUE, echo=TRUE}
viz <- create_viz(type = "histogram", color_palette = c("#3498DB")) %>%
  add_viz(x_var = "age", title = "Age", tabgroup = "demo") %>%
  add_viz(x_var = "income", title = "Income", tabgroup = "demo") %>%
  add_viz(x_var = "satisfaction", title = "Satisfaction", tabgroup = "feedback")

print(viz)
```

---

# The Output Explained

.output-box[
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â•‘ ğŸ“Š VISUALIZATION COLLECTION
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â•‘ Total visualizations: 3
â•‘
â•‘ STRUCTURE:
â•‘ â”œâ”€ ğŸ“ demo
â•‘ â”‚  â”œâ”€ ğŸ“‰ HISTOGRAM: Age
â•‘ â”‚  â””â”€ ğŸ“‰ HISTOGRAM: Income
â•‘ â””â”€ ğŸ“ feedback
â•‘    â””â”€ ğŸ“‰ HISTOGRAM: Score
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
]

.key-point[
`print()` is your **debugging superpower**! Always use it to see structure.
]

---

# Understanding Tabgroups

.analogy[
Tabgroups are like **folders** organizing your files (charts).
]

```{r}
viz <- create_viz(type = "histogram") %>%
  add_viz(x_var = "age", tabgroup = "demographics") %>%
  add_viz(x_var = "income", tabgroup = "demographics") %>%
  add_viz(x_var = "score", tabgroup = "feedback")
```

.diagram[
ğŸ“‚ Dashboard
â”œâ”€â”€ ğŸ“ demographics (tab)
â”‚   â”œâ”€â”€ ğŸ“Š Age Distribution
â”‚   â””â”€â”€ ğŸ“Š Income Distribution
â””â”€â”€ ğŸ“ feedback (tab)
    â””â”€â”€ ğŸ“Š Score Distribution
]

---

# Nested Tabgroups

.analogy[
Use `/` like **file paths** to create nested folders.
]

```{r}
viz <- create_viz(type = "histogram") %>%
* add_viz(x_var = "age", tabgroup = "analysis/demographics/age") %>%
* add_viz(x_var = "income", tabgroup = "analysis/demographics/income") %>%
* add_viz(x_var = "score", tabgroup = "analysis/feedback")
```

---

# Nested Tabgroups: The Output

.output-box[
â•‘ STRUCTURE:
â•‘ â””â”€ ğŸ“ analysis
â•‘    â”œâ”€ ğŸ“ demographics
â•‘    â”‚  â”œâ”€ ğŸ“‰ HISTOGRAM: age
â•‘    â”‚  â””â”€ ğŸ“‰ HISTOGRAM: income
â•‘    â””â”€ ğŸ“ feedback
â•‘       â””â”€ ğŸ“‰ HISTOGRAM: score
]

.diagram[
analysis/demographics/age
   â†“        â†“         â†“
 Level 1  Level 2   Level 3
]

---

# The + Operator

.analogy[
Combine visualization collections like **puzzle pieces**!
]

```{r}
# Create separate modules
demographics <- create_viz(type = "histogram") %>%
  add_viz(x_var = "age", tabgroup = "demo", title = "Age")

feedback <- create_viz(type = "bar") %>%
  add_viz(x_var = "rating", tabgroup = "feedback", title = "Ratings")

# Combine them!
*combined <- demographics + feedback
```

---

# Combining: The Output

```{r, eval=TRUE, echo=TRUE}
demographics <- create_viz(type = "histogram") %>%
  add_viz(x_var = "age", tabgroup = "demo", title = "Age")

feedback <- create_viz(type = "bar") %>%
  add_viz(x_var = "rating", tabgroup = "feedback", title = "Ratings")

combined <- demographics + feedback
print(combined)
```

---

# Using Filters

```{r}
viz <- create_viz(type = "histogram") %>%
  add_viz(
    x_var = "age",
    title = "Wave 1",
*   filter = ~ wave == 1,
*   title_tabset = "Wave 1",
    tabgroup = "comparison"
  ) %>%
  add_viz(
    x_var = "age",
    title = "Wave 2",
*   filter = ~ wave == 2,
*   title_tabset = "Wave 2",
    tabgroup = "comparison"
  )
```

---

# Filter Syntax

.warning[
Always use `~` before the condition! This is formula syntax.
]

.pull-left[
.compare-bad[
```r
filter = wave == 1
# âŒ Missing ~
```
]
]

.pull-right[
.compare-good[
```r
filter = ~ wave == 1
# âœ… Correct!
```
]
]

---

# Filter Examples

```{r}
# Single condition
filter = ~ department == "Sales"
filter = ~ age > 30

# Multiple conditions (AND)
filter = ~ department == "Sales" & age > 30

# Multiple values (OR with %in%)
filter = ~ department %in% c("Sales", "Marketing")

# Complex
filter = ~ (age >= 18 & age <= 35) | senior == TRUE
```

---

# Vectorized Creation

### Create many charts at once with `add_vizzes()`

```{r}
viz <- create_viz(type = "bar", horizontal = TRUE) %>%
* add_vizzes(
*   x_var = paste0("q", 1:10),        # 10 variables
*   title = paste("Question", 1:10),  # 10 titles
*   .tabgroup_template = "survey/{title}"
* )
```

.output-box[
Creates 10 visualizations with ONE call!
Each gets its own tabgroup: survey/Question 1, survey/Question 2, etc.
]

---

# Vectorized Creation: Details

### Any parameter can be vectorized

```{r}
viz <- create_viz(type = "histogram") %>%
  add_vizzes(
    x_var = c("age", "income", "score"),
    title = c("Age Distribution", "Income Distribution", "Score Distribution"),
    bins = c(20, 30, 25),
    color_palette = list(c("#3498DB"), c("#E74C3C"), c("#27AE60"))
  )
```

.tip[
Use `list()` for parameters that are themselves vectors (like `color_palette`).
]

---

# Survey Weights

```{r}
# At collection level (applies to all)
viz <- create_viz(
  type = "histogram",
* weight_var = "survey_weight"
) %>%
  add_viz(x_var = "age", title = "Weighted Age")
```

.note[
Counts become weighted counts (sum of weights instead of row count).
]

---

# Custom Tabgroup Labels with Icons

```{r}
viz <- create_viz(type = "histogram") %>%
  add_viz(x_var = "age", tabgroup = "demographics") %>%
  add_viz(x_var = "score", tabgroup = "feedback") %>%
* set_tabgroup_labels(list(
*   demographics = "{{< iconify ph:users-fill >}} Demographics",
*   feedback = "{{< iconify ph:heart-fill >}} Feedback"
* ))
```

.tip[
Browse 200,000+ icons: https://icon-sets.iconify.design/
]

---

class: inverse, center, middle

# Visualization Types
## All 9 Chart Types

![](https://media.giphy.com/media/3oKIPnAiaMCws8nOsE/giphy.gif)

---

# Overview: Visualization Types

| Type | Function | Best For |
|------|----------|----------|
| `histogram` | `viz_histogram()` | Distributions |
| `bar` | `viz_bar()` | Categories |
| `stackedbar` | `viz_stackedbar()` | Composition |
| `stackedbars` | `viz_stackedbars()` | Likert questions |
| `timeline` | `viz_timeline()` | Time trends |
| `heatmap` | `viz_heatmap()` | 2D patterns |
| `treemap` | `viz_treemap()` | Hierarchies |
| `scatter` | `viz_scatter()` | Relationships |
| `map` | `viz_map()` | Geographic data |

---

# Common Parameters (All Chart Types)

### Every visualization shares these core parameters:

| Parameter | Purpose | Example |
|-----------|---------|---------|
| `title` | Chart title | `"Age Distribution"` |
| `subtitle` | Secondary title | `"n = 500"` |
| `tabgroup` | Tab organization | `"demographics"` |
| `filter` | Subset data | `~ age > 30` |
| `color_palette` | Custom colors | `c("#3498DB", "#E74C3C")` |
| `drop_na_vars` | Remove NA rows | `TRUE` |
| `weight_var` | Survey weights | `"sample_weight"` |

---

# Key Variables by Chart Type

| Chart Type | Primary Vars | Optional Vars |
|------------|--------------|---------------|
| `histogram` | `x_var` | `bins`, `bin_breaks` |
| `bar` | `x_var` | `group_var`, `horizontal` |
| `stackedbar` | `x_var`, `stack_var` | `stack_breaks` |
| `timeline` | `time_var`, `y_var` | `group_var`, `y_filter` |
| `heatmap` | `x_var`, `y_var`, `value_var` | `agg_fun` |
| `treemap` | `group_var`, `value_var` | `color_var` |
| `scatter` | `x_var`, `y_var` | `color_var`, `size_var` |
| `map` | `location_var`, `value_var` | `map_type` |

.tip[
Each chart type has specific required variables. Check the documentation!
]

---

# Tip: Preview with create_*()

```{r}
# Test what it looks like BEFORE adding to dashboard
viz_histogram(
  data = mtcars,
  x_var = "mpg",
  title = "MPG Distribution",
  bins = 15,
  color_palette = c("#3498DB")
)
```

.tip[
Same parameters work in both `viz_histogram()` and `add_viz(type = "histogram")`!
]

---

# Histogram

```{r}
create_viz(type = "histogram") %>%
  add_viz(
    x_var = "age",
    title = "Age Distribution",
*   bins = 20,
*   histogram_type = "count",  # or "percent"
    x_label = "Age (years)",
    y_label = "Count"
  )
```

---

# Histogram: Live Preview

```{r histogram-live, eval=TRUE, echo=FALSE, out.width="100%", out.height="400px"}
viz_histogram(
  data = survey_data,
  x_var = "age",
  title = "Age Distribution",
  bins = 20,
  color_palette = c("#6366f1"),
  x_label = "Age (years)",
  y_label = "Count"
)
```

---

# Histogram: Custom Binning

```{r}
add_viz(
  x_var = "age",
  title = "Age Groups",
* bin_breaks = c(18, 30, 45, 60, 75, Inf),
* bin_labels = c("18-29", "30-44", "45-59", "60-74", "75+")
)
```

.warning[
`bin_labels` must have length = `length(bin_breaks) - 1`
]

---

# Bar Chart

.pull-left[
### Vertical
```{r}
add_viz(
  type = "bar",
  x_var = "department",
  horizontal = FALSE,
  bar_type = "count"
)
```
]

.pull-right[
### Horizontal (recommended)
```{r}
add_viz(
  type = "bar",
  x_var = "department",
* horizontal = TRUE,
* bar_type = "percent"
)
```
]

---

# Bar Chart: Live Preview

```{r bar-live, eval=TRUE, echo=FALSE, out.width="100%", out.height="380px"}
viz_bar(
  data = survey_data,
  x_var = "department",
  title = "Responses by Department",
  horizontal = TRUE,
  bar_type = "percent",
  color_palette = c("#6366f1")
)
```

.tip[
Use horizontal bars when category names are long or you have many categories.
]

---

# Grouped Bar Chart

```{r}
add_viz(
  type = "bar",
  x_var = "department",
* group_var = "wave",  # Creates grouped bars
  title = "Department by Wave",
  horizontal = TRUE,
  bar_type = "percent"
)
```

.diagram[
Sales         â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  Wave 1
              â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  Wave 2

Engineering   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  Wave 1
              â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  Wave 2
]

---

# Stacked Bar

```{r}
add_viz(
  type = "stackedbar",
* x_var = "department",        # Categories
* stack_var = "satisfaction",  # What to stack
  stacked_type = "percent",
  horizontal = TRUE,
* stack_breaks = c(0.5, 1.5, 2.5, 3.5, 4.5, 5.5),
* stack_bin_labels = c("1", "2", "3", "4", "5"),
  color_palette = c("#E74C3C", "#E67E22", "#F1C40F", "#2ECC71", "#27AE60")
)
```

---

# Stacked Bar: Live Preview

```{r stackedbar-live, eval=TRUE, echo=FALSE, out.width="100%", out.height="380px"}
viz_stackedbar(
  data = survey_data,
  x_var = "department",
  stack_var = "satisfaction",
  title = "Satisfaction by Department",
  stacked_type = "percent",
  horizontal = TRUE,
  stack_breaks = c(0.5, 1.5, 2.5, 3.5, 4.5, 5.5),
  stack_bin_labels = c("1", "2", "3", "4", "5"),
  color_palette = c("#E74C3C", "#E67E22", "#F1C40F", "#2ECC71", "#27AE60")
)
```

---

# Stacked Bars (Multiple Questions)

### Perfect for Likert-scale surveys!

```{r}
questions <- c("q1_trust", "q2_value", "q3_recommend")
labels <- c("I trust the company", "I feel valued", "I would recommend")

add_viz(
  type = "stackedbars",
* x_vars = questions,
* x_var_labels = labels,
  stacked_type = "percent",
  horizontal = TRUE,
  stack_breaks = c(0.5, 1.5, 2.5, 3.5, 4.5, 5.5),
  stack_bin_labels = c("SD", "D", "N", "A", "SA")
)
```

---

# Timeline

```{r}
add_viz(
  type = "timeline",
* time_var = "year",
* y_var = "satisfaction",
* chart_type = "line",  # or "area", "stacked_area"
  title = "Satisfaction Over Time"
)
```

### With grouping (multiple lines):

```{r}
add_viz(
  type = "timeline",
  time_var = "year",
  y_var = "satisfaction",
* group_var = "department",  # One line per department
  chart_type = "line"
)
```

---

# Timeline: Live Preview

```{r timeline-live, eval=TRUE, echo=FALSE, out.width="100%", out.height="380px"}
viz_timeline(
  data = survey_data,
  time_var = "year",
  y_var = "satisfaction",
  group_var = "department",
  title = "Satisfaction Over Time by Department",
  chart_type = "line"
)
```

---

# Timeline: Response Filtering

### Show only "highly satisfied" responses

```{r}
add_viz(
  type = "timeline",
  time_var = "year",
  y_var = "satisfaction",
* y_filter = c(4, 5),
* y_filter_combine = TRUE,
* y_filter_label = "High Satisfaction (4-5)"
)
```

.tip[
Track the percentage of "promoters" or "top-box" responses over time.
]

---

# Heatmap

```{r}
add_viz(
  type = "heatmap",
* x_var = "department",
* y_var = "region",
* value_var = "satisfaction",
* agg_fun = mean  # mean, sum, median (function, not string!)
)
```

---

# Heatmap: Live Preview

```{r heatmap-live, eval=TRUE, echo=FALSE, out.width="100%", out.height="380px"}
viz_heatmap(
  data = survey_data,
  x_var = "department",
  y_var = "region",
  value_var = "satisfaction",
  agg_fun = mean,
  title = "Avg Satisfaction: Department Ã— Region"
)
```

---

# Treemap & Scatter

.pull-left[
### Treemap
```{r}
add_viz(
  type = "treemap",
* group_var = "department",
* value_var = "revenue",
  color_var = "growth"
)
```
]

.pull-right[
### Scatter
```{r}
add_viz(
  type = "scatter",
  x_var = "age",
  y_var = "income",
* color_var = "department"
)
```
]

---

# Treemap: Live Preview

```{r treemap-live, eval=TRUE, echo=FALSE, out.width="100%", out.height="380px"}
# Create aggregated data for treemap
treemap_data <- survey_data %>%
  group_by(department) %>%
  summarise(
    count = n(),
    avg_satisfaction = mean(satisfaction)
  )

viz_treemap(
  data = treemap_data,
  group_var = "department",
  value_var = "count",
  color_var = "avg_satisfaction",
  title = "Department Size & Satisfaction"
)
```

---

# Scatter: Live Preview

```{r scatter-live, eval=TRUE, echo=FALSE, out.width="100%", out.height="380px"}
viz_scatter(
  data = survey_data,
  x_var = "age",
  y_var = "income",
  color_var = "department",
  title = "Age vs Income by Department",
  color_palette = c("#6366f1", "#ec4899", "#10b981", "#f59e0b", "#3b82f6")
)
```

---

# Map Visualization

```{r}
add_viz(
  type = "map",
* location_var = "country",       # Country/region names
* value_var = "avg_satisfaction", # Numeric value to display
  title = "Satisfaction by Country",
  map_type = "world",             # "world", "usa", "europe", etc.
  color_palette = c("#f7fbff", "#08306b")  # Low to high gradient
)
```

.tip[
Maps require geographic names (countries, states) or ISO codes in `location_var`.
]

---

class: inverse, center, middle

# Content System
## Beyond Just Charts

---

# The Unified Content System

### Mix visualizations with text, callouts, and more!

```{r}
content <- create_content() %>%
  add_text("# Analysis Results") %>%
  add_callout("Sample: n=1000", type = "note") %>%
  add_viz(type = "histogram", x_var = "age") %>%
  add_accordion("Methodology", text = "Click to expand...")
```

.note[
`create_content()` and `create_viz()` are **aliases** - use whichever name fits!
]

---

# Content Types

| Function | Purpose |
|----------|---------|
| `add_viz()` | Visualization |
| `add_text()` | Markdown text |
| `add_callout()` | Note/tip/warning box |
| `add_image()` | Image |
| `add_accordion()` | Collapsible section |
| `add_card()` | Card container |
| `add_value_box()` | KPI metric |
| `add_spacer()` | Vertical space |
| `add_divider()` | Horizontal line |
| `add_code()` | Code block |

---

# add_text() and md_text()

```{r}
add_page(
  "Home",
  text = md_text(
    "# Welcome!",
    "",                    # Blank line = paragraph break
    "This is **bold** and *italic*.",
    "",
    "## Subheading",
    "",
    "- Bullet 1",
    "- Bullet 2"
  )
)
```

.tip[
Each argument to `md_text()` becomes one line.
]

---

# add_callout()

```{r}
add_callout(
  text = "Important information here.",
* type = "warning",  # note, tip, warning, caution, important
  title = "Custom Title"
)
```

| Type | Color | Use |
|------|-------|-----|
| `note` | Blue | General info |
| `tip` | Green | Helpful suggestions |
| `warning` | Orange | Cautions |
| `important` | Purple | Key points |

---

# add_value_box()

```{r}
content <- create_content() %>%
* add_value_box_row() %>%
    add_value_box(
      title = "Responses",
      value = "1,234",
      logo_text = "ğŸ“Š",
      bg_color = "#3498DB"
    ) %>%
    add_value_box(
      title = "Satisfaction",
      value = "4.2/5",
      logo_text = "â­",
      bg_color = "#27AE60"
    ) %>%
* end_value_box_row()
```

---

class: inverse, center, middle

# Interactive Inputs
## Adding User Controls

---

# Interactive Filtering

```{r}
content <- create_content() %>%
* add_input_row(style = "boxed") %>%
    add_input(
      input_id = "region_filter",
      label = "Select Regions",
      type = "select_multiple",
*     filter_var = "region",       # Column to filter
      options = c("North", "South", "East", "West")
    ) %>%
* end_input_row() %>%
  add_viz(
    type = "timeline",
    time_var = "year",
    y_var = "value",
*   group_var = "region"           # Must match filter_var!
  )
```

---

# Input Types

| Type | Description |
|------|-------------|
| `select_multiple` | Multi-select dropdown |
| `select_single` | Single dropdown |
| `checkbox` | Checkbox group |
| `radio` | Radio buttons |
| `switch` | Toggle switch |
| `slider` | Range slider |
| `text` | Text input |
| `button_group` | Segmented buttons |

---

# Switch: Toggle Series

```{r}
add_input(
  input_id = "show_average",
  label = "Show Average Line",
  type = "switch",
  filter_var = "group",
* toggle_series = "Average",  # Series name to toggle
* override = TRUE,            # Exempt from other filters
  value = TRUE                # Start ON
)
```

.tip[
Use `override = TRUE` to keep a benchmark line always visible when the switch is ON.
]

---

# Slider with Custom Labels

```{r}
add_input(
  input_id = "decade_slider",
  label = "Select Decade",
  type = "slider",
  filter_var = "decade_num",
  min = 1, max = 6, step = 1, value = 1,
* labels = c("1970s", "1980s", "1990s", "2000s", "2010s", "2020s")
)
```

---

class: inverse, center, middle

# Step 2: Assembling the Dashboard

---

# create_dashboard()

```{r}
dashboard <- create_dashboard(
* title = "Survey Dashboard",
* output_dir = "my_dashboard",
  
  # Styling
  theme = "flatly",
  tabset_theme = "modern",
  
  # Features
  search = TRUE,
  breadcrumbs = TRUE,
  back_to_top = TRUE
)
```

---

# add_page()

```{r}
dashboard <- dashboard %>%
  add_page(
    name = "Home",
    text = md_text("# Welcome!"),
    icon = "ph:house-fill",
*   is_landing_page = TRUE
  ) %>%
  add_page(
    name = "Analysis",
*   data = survey_data,
*   visualizations = my_viz,
    icon = "ph:chart-bar-fill"
  ) %>%
  add_page(
    name = "About",
    icon = "ph:info-fill",
*   navbar_align = "right"
  )
```

---

# Print the Dashboard

```{r, eval=TRUE, echo=TRUE}
dashboard <- create_dashboard(title = "Test", output_dir = "test") %>%
  add_page("Home", text = md_text("# Welcome"), is_landing_page = TRUE) %>%
  add_page("Analysis", icon = "ph:chart-bar-fill")

print(dashboard)
```

---

# Dashboard Output

.output-box[
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â•‘ ğŸ¨ DASHBOARD PROJECT
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â•‘ ğŸ“ Title: Test
â•‘ ğŸ“ Output: /path/to/test
â•‘
â•‘ âš™ï¸  FEATURES:
â•‘    â€¢ ğŸ” Search
â•‘    â€¢ ğŸ—‚ï¸  Tabs: default
â•‘
â•‘ ğŸ“„ PAGES (2):
â•‘ â”œâ”€ ğŸ“„ Home [ğŸ  Landing]
â•‘ â””â”€ ğŸ“„ Analysis [ğŸ¯ Icon]
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
]

---

# Page Performance Options

```{r}
add_page(
  name = "Heavy Analysis",
  data = large_data,
  visualizations = complex_viz,
  
  # Loading animation
* overlay = TRUE,
* overlay_theme = "glass",
* overlay_duration = 1.5,
  
  # Lazy loading
* lazy_load_charts = TRUE,
* lazy_load_tabs = TRUE
)
```

---

# Icons Everywhere!

### Format: `"set:icon-name"`

| Set | Examples |
|-----|----------|
| Phosphor (`ph:`) | `ph:house-fill`, `ph:chart-bar-fill` |
| Bootstrap (`bi:`) | `bi:graph-up`, `bi:people-fill` |
| Font Awesome (`fa:`) | `fa:chart-bar`, `fa:users` |

```{r}
# In pages
add_page("Home", icon = "ph:house-fill")

# In text
md_text("## Features {{< iconify ph:sparkle-fill >}}")

# In tab labels
set_tabgroup_labels(list(
  overview = "{{< iconify ph:chart-bar-fill >}} Overview"
))
```

---

class: inverse, center, middle

# Themes & Styling

---

# Two Types of Themes

| Level | What | Parameter |
|-------|------|-----------|
| **Bootswatch** | Overall look | `theme = "flatly"` |
| **Tabset** | Tab styling | `tabset_theme = "modern"` |

```{r}
create_dashboard(
  title = "Dashboard",
  output_dir = "output",
* theme = "flatly",
* tabset_theme = "modern"
)
```

---

# Built-in Theme Functions

```{r}
dashboard %>%
* apply_theme(theme_modern())
```

| Function | Style |
|----------|-------|
| `theme_modern()` | Tech/startup |
| `theme_academic()` | Research |
| `theme_clean()` | Minimal |
| `theme_ascor()` | UvA branding |

### Variants:
```{r}
apply_theme(theme_modern("purple"))
apply_theme(theme_modern("green"))
apply_theme(theme_academic(accent_color = "#8B0000"))
```

---

# Theme Customization

```{r}
apply_theme(
  theme_modern("purple"),
  
* mainfont = "Inter",
* fontsize = "18px",
* navbar_bg_color = "#8B0000",
* max_width = "1400px"
)
```

.tip[
Override any parameter: `navbar_bg_color`, `navbar_text_color`, `fontcolor`, `linkcolor`, `backgroundcolor`, `margin_left/right/top/bottom`
]

---

class: inverse, center, middle

# Step 3: Generating & Publishing

---

# generate_dashboard()

```{r}
# Fast (development): files only
generate_dashboard(dashboard, render = FALSE)

# Full: files + HTML
generate_dashboard(dashboard, render = TRUE)

# Full + open browser
generate_dashboard(dashboard, render = TRUE, open = "browser")
```

.output-box[
Dashboard project initialized at: my_dashboard
Generating page: Home
Generating page: Analysis
Rendering dashboard...
âœ“ Dashboard generated successfully!
]

---

# Publishing to GitHub Pages

```{r}
# First time
publish_dashboard(message = "Initial commit")

# Updates
generate_dashboard(dashboard, render = TRUE)
update_dashboard(message = "Added new charts")
```

.output-box[
Your dashboard URL:
https://USERNAME.github.io/REPO-NAME/
]

---

class: inverse, center, middle

# Best Practices

---

# Tip #1: Always Print!

```{r}
print(viz)        # See visualization structure
print(dashboard)  # See dashboard structure
```

.key-point[
`print()` is your **debugging superpower**!
]

---

# Tip #2: Smart Defaults (DRY)

.pull-left[
.compare-bad[
```r
viz <- create_viz() %>%
  add_viz(
    x_var = "q1",
    color_palette = c("#3498DB"),
    bins = 20
  ) %>%
  add_viz(
    x_var = "q2",
    color_palette = c("#3498DB"),
    bins = 20
  )
```
]
]

.pull-right[
.compare-good[
```r
viz <- create_viz(
* color_palette = c("#3498DB"),
* bins = 20
) %>%
  add_viz(x_var = "q1") %>%
  add_viz(x_var = "q2")
```
]
]

---

# Tip #3: Test Without Rendering

```{r}
# Fast iteration
generate_dashboard(dashboard, render = FALSE)

# Only render when ready
generate_dashboard(dashboard, render = TRUE)
```

.tip[
Rendering can take 30+ seconds for large dashboards!
]

---

# Common Mistakes

| Problem | Fix |
|---------|-----|
| Variable not found | Check `names(data)` |
| Filter not working | Use `~ condition` |
| Wrong bin label count | `len(labels) = len(breaks) - 1` |
| Tabs wrong order | Reorder `add_viz()` calls |

---

# Complete Example

```{r}
library(dashboardr)

# 1. Visualizations
viz <- create_viz(type = "histogram", color_palette = c("#3498DB")) %>%
  add_viz(x_var = "age", tabgroup = "demo", title = "Age") %>%
  set_tabgroup_labels(list(demo = "{{< iconify ph:users-fill >}} Demographics"))

# 2. Dashboard
dashboard <- create_dashboard(
  title = "Survey Dashboard",
  output_dir = "survey"
) %>%
  apply_theme(theme_modern()) %>%
  add_page("Home", text = md_text("# Welcome!"), is_landing_page = TRUE) %>%
  add_page("Analysis", data = survey_data, visualizations = viz)

# 3. Generate
generate_dashboard(dashboard, render = TRUE, open = "browser")
```

---

# Resources

.pull-left[
### Documentation
- Package: https://favstats.github.io/dashboardr/
- `?create_dashboard`
- `vignette(package = "dashboardr")`
]

.pull-right[
### Tools
- Icons: https://icon-sets.iconify.design/
- Themes: https://bootswatch.com/
- Colors: https://colorbrewer2.org/
]

---

class: inverse, center, middle

# Quick Reference

---

# Core Pattern

.diagram[
viz <- create_viz(type = "___", ...) %>%
  add_viz(x_var = "___", tabgroup = "___")

dashboard <- create_dashboard(title = "___", output_dir = "___") %>%
  apply_theme(theme_modern()) %>%
  add_page("___", data = ___, visualizations = ___)

generate_dashboard(dashboard, render = TRUE, open = "browser")
]

---

# Visualization Types

```
type = "histogram"    # Distributions
type = "bar"          # Categories  
type = "stackedbar"   # Composition
type = "stackedbars"  # Multiple Likert
type = "timeline"     # Over time
type = "heatmap"      # 2D patterns
type = "treemap"      # Hierarchies
type = "scatter"      # Relationships
type = "map"          # Geographic
```

---

# Common Parameters

```
tabgroup = "section/subsection"
filter = ~ column == "value"
color_palette = c("#color1", "#color2")
horizontal = TRUE/FALSE
drop_na_vars = TRUE
weight_var = "weights"
```

---

class: inverse, center, middle

# That's Day 1!

## Great job getting started!

### See you in Day 2 for advanced features!

![](https://media.giphy.com/media/l0MYt5jPR6QX5pnqM/giphy.gif)

---

class: inverse, center, middle

# Thank You!

## Now go build something amazing!

### Remember: `print()` is your friend!

<br>

.fivty[
Day 2 covers: Advanced inputs, deep theming, publishing, pagination, and more!
]

---

# Bonus: Full Content Reference

| Function | Purpose |
|----------|---------|
| `add_viz()` | Chart |
| `add_text()` | Markdown |
| `add_callout()` | Note/tip |
| `add_image()` | Image |
| `add_accordion()` | Collapsible |
| `add_card()` | Card |
| `add_value_box()` | KPI |
| `add_input()` | Filter |
| `add_spacer()` | Space |
| `add_divider()` | Line |
| `add_table()` | Table |
| `add_gt()` | GT table |
| `add_DT()` | DataTable |

---

# Bonus: Input Types Reference

| Type | Use |
|------|-----|
| `select_multiple` | Multi-select dropdown |
| `select_single` | Single dropdown |
| `checkbox` | Toggle multiple |
| `radio` | Single choice |
| `switch` | On/off toggle |
| `slider` | Range |
| `text` | Search |
| `button_group` | Segmented |

---

class: inverse, center, middle

# Bonus Slides
## Extended Content

---

# Multi-Dataset Pages

### Use multiple datasets on one page

```{r}
dashboard %>%
  add_page(
    name = "Multi Analysis",
*   data = list(
*     sales = sales_data,
*     customers = customer_data,
*     products = product_data
*   ),
    visualizations = viz
  )
```

Reference in viz:
```{r}
add_viz(x_var = "revenue", data_name = "sales")
```

---

# Pagination: Page Breaks

```{r}
combined <- demographics_viz %>%
  combine_viz(satisfaction_viz) %>%
* add_pagination() %>%        # Break here!
  combine_viz(trends_viz) %>%
* add_pagination() %>%        # Another break!
  combine_viz(summary_viz)
```

.tip[
Use when you have too many charts for one scrollable page.
]

---

# Navbar Dropdown Menus

```{r}
reports_menu <- navbar_menu(
  text = "Reports",
  pages = c("Monthly", "Quarterly", "Annual"),
  icon = "ph:file-text"
)

dashboard <- create_dashboard(
  title = "Dashboard",
  output_dir = "output",
* navbar_sections = list(reports_menu)
) %>%
  add_page("Monthly", data = data, visualizations = viz1) %>%
  add_page("Quarterly", data = data, visualizations = viz2)
```

---

# Dashboard Metadata

```{r}
create_dashboard(
  title = "Survey Dashboard",
  output_dir = "output",
  
  # Metadata
* author = "Research Team",
* description = "Annual survey results",
* date = "2024-01-15",
* page_footer = "Â© 2024 Organization"
)
```

---

# Social Links

```{r}
create_dashboard(
  title = "Dashboard",
  output_dir = "output",
  
* github = "https://github.com/user/project",
* twitter = "https://twitter.com/user",
* linkedin = "https://linkedin.com/in/user",
* email = "contact@example.com",
* website = "https://example.com"
)
```

---

# Analytics

```{r}
create_dashboard(
  title = "Dashboard",
  output_dir = "output",
  
* plausible = "yourdomain.com"  # Privacy-friendly analytics
)
```

---

# Bootswatch Themes

### 25+ professional Bootstrap themes

.pull-left[
**Light:**
- `flatly` - Clean, modern
- `cosmo` - Bright
- `minty` - Fresh green
- `yeti` - Minimal
- `united` - Corporate
]

.pull-right[
**Dark:**
- `darkly` - Full dark
- `slate` - Dark gray
- `cyborg` - High contrast
- `vapor` - Cyberpunk
]

Browse: https://bootswatch.com/

---

# Tabset Themes

```{r}
tabset_theme = "modern"     # Clean shadows
tabset_theme = "minimal"    # Simple
tabset_theme = "pills"      # Rounded
tabset_theme = "classic"    # Traditional
tabset_theme = "underline"  # Bottom line
tabset_theme = "segmented"  # iOS-style
```

---

# Custom Tab Colors

```{r}
create_dashboard(
  ...,
  tabset_theme = "modern",
* tabset_colors = list(
*   active_bg = "#3498DB",
*   active_text = "#FFFFFF",
*   inactive_bg = "#ECF0F1",
*   inactive_text = "#7F8C8D",
*   hover_bg = "#BDC3C7"
* )
)
```

---

# Color Palettes for Visualizations

```{r}
viz <- create_viz(
  type = "stackedbar",
* color_palette = c(
*   "#E74C3C",  # Red
*   "#E67E22",  # Orange
*   "#F1C40F",  # Yellow
*   "#2ECC71",  # Green
*   "#27AE60"   # Dark green
* )
)
```

.tip[
Use https://colorbrewer2.org/ for accessible palettes!
]

---

# add_image()

```{r}
content <- create_content() %>%
  add_image(
*   src = "images/chart.png",
*   alt = "Chart description",
    caption = "Figure 1: Results",
    width = "80%",
    align = "center"
  )
```

From URL:
```{r}
add_image(
  src = "https://example.com/logo.png",
  alt = "Logo",
  width = "200px"
)
```

---

# add_accordion()

### Collapsible sections

```{r}
content <- create_content() %>%
  add_accordion(
    title = "Methodology",
    text = md_text(
      "## Data Collection",
      "",
      "We surveyed 1,000 respondents..."
    ),
*   open = FALSE  # Starts collapsed
  )
```

---

# add_card()

```{r}
content <- create_content() %>%
  add_card(
    title = "Key Insight",
    text = md_text(
      "Satisfaction increased **15%**",
      "compared to last year."
    ),
    footer = "Source: Annual Survey 2024"
  )
```

---

# Input Row Styling

```{r}
# Boxed style (with background)
add_input_row(style = "boxed", align = "center") %>%
  add_input(...) %>%
  add_input(...) %>%
end_input_row()

# Inline style (compact)
add_input_row(style = "inline", align = "left") %>%
  add_input(...) %>%
end_input_row()
```

---

# Input Margins

```{r}
add_input(
  input_id = "filter1",
  type = "select_multiple",
  filter_var = "region",
  options = c("North", "South"),
  
  # Margins
* mt = "10px",   # margin-top
* mr = "20px",   # margin-right
* mb = "10px",   # margin-bottom
* ml = "10px"    # margin-left
)
```

---

# Input: Grouped Options

```{r}
add_input(
  input_id = "country_filter",
  type = "select_multiple",
  filter_var = "country",
* options = list(
*   "Europe" = c("Germany", "France", "UK"),
*   "Asia" = c("China", "Japan", "Korea"),
*   "Americas" = c("USA", "Canada", "Mexico")
* )
)
```

---

# One-Time Publishing Setup

```{r}
# 1. Install packages
install.packages(c("usethis", "gert"))

# 2. Configure Git
usethis::use_git_config(
  user.name = "Your Name",
  user.email = "you@example.com"
)

# 3. Create GitHub token
usethis::create_github_token()
# Copy the token!

# 4. Store token
gitcreds::gitcreds_set()
# Paste when prompted
```

.note[
This only needs to be done **once** per computer!
]

---

# Update Published Dashboard

```{r}
# 1. Make changes
# 2. Regenerate
generate_dashboard(dashboard, render = TRUE)

# 3. Push updates
update_dashboard(message = "Added new charts")
```

.output-box[
âœ“ Changes pushed successfully!
Your dashboard: https://username.github.io/repo-name/
]

---

# Debugging: Check Variable Names

```{r}
# Check what columns exist
names(my_data)

# Check for NA values
summary(my_data$age)
table(is.na(my_data$age))
```

---

# Debugging: Check Data Types

```{r}
# Numeric or factor?
class(my_data$satisfaction)

# What values exist?
unique(my_data$department)
```

---

# Dropping NA Values

```{r}
# At collection level
viz <- create_viz(
  type = "histogram",
* drop_na_vars = TRUE
)

# Or per visualization
add_viz(
  x_var = "age",
* drop_na_vars = TRUE
)
```

---

# Including NA as Category

```{r}
add_viz(
  x_var = "education",
* include_na = TRUE,
* na_label = "Not Reported"
)
```

---

# Modular Organization

```{r}
# Create separate modules
demographics <- create_viz(type = "histogram") %>%
  add_viz(x_var = "age", tabgroup = "demo")

satisfaction <- create_viz(type = "stackedbar") %>%
  add_viz(x_var = "dept", stack_var = "rating", tabgroup = "sat")

trends <- create_viz(type = "timeline") %>%
  add_viz(time_var = "year", y_var = "score", tabgroup = "trends")

# Combine
all_viz <- demographics + satisfaction + add_pagination() + trends
```

---

# Axis Labels

```{r}
add_viz(
  type = "histogram",
  x_var = "age",
* x_label = "Age (years)",
* y_label = "Number of Respondents",
  title = "Age Distribution",
  subtitle = "All survey respondents"
)
```

---

# Tooltip Customization

```{r}
add_viz(
  type = "histogram",
  x_var = "income",
* tooltip_prefix = "$",
* tooltip_suffix = "K",
* x_tooltip_suffix = " dollars"
)
```

---

# Value Mapping

```{r}
education_map <- list(
  "1" = "High School",
  "2" = "Bachelor's",
  "3" = "Master's",
  "4" = "PhD"
)

add_viz(
  type = "bar",
  x_var = "education",
* x_map_values = education_map
)
```

---

# X-Axis Order

```{r}
add_viz(
  type = "bar",
  x_var = "satisfaction",
* x_order = c("Very Low", "Low", "Medium", "High", "Very High")
)
```

---

# Text Annotations on Charts

```{r}
add_viz(
  type = "histogram",
  x_var = "age",
  title = "Age Distribution",
  
* text = md_text(
*   "This chart shows the age distribution.",
*   "Note the peak in the 30-40 range."
* ),
* text_position = "above"  # or "below"
)
```

---

# Timeline: Response Binning

```{r}
add_viz(
  type = "timeline",
  time_var = "year",
  y_var = "satisfaction",
  chart_type = "stacked_area",
  
* y_breaks = c(0.5, 2.5, 4.5, 5.5),
* y_bin_labels = c("Low (1-2)", "Medium (3-4)", "High (5)")
)
```

---

# Timeline: Time Binning

```{r}
add_viz(
  type = "timeline",
  time_var = "year",
  y_var = "satisfaction",
  chart_type = "stacked_area",
  
* time_breaks = c(1970, 1980, 1990, 2000, 2010, 2020),
* time_bin_labels = c("1970s", "1980s", "1990s", "2000s", "2010s")
)
```

---

# Response Levels Order

```{r}
add_viz(
  type = "timeline",
  time_var = "year",
  y_var = "health",
  chart_type = "stacked_area",
  
* y_levels = c("poor", "fair", "good", "excellent")
)
```

---

# Tables: add_gt()

```{r}
library(gt)

my_table <- gt(summary_data) %>%
  tab_header(title = "Summary Statistics") %>%
  fmt_number(columns = everything(), decimals = 1)

content <- create_content() %>%
* add_gt(my_table)
```

---

# Tables: add_DT()

```{r}
content <- create_content() %>%
* add_DT(
    my_data,
    options = list(pageLength = 10, scrollX = TRUE)
  )
```

.tip[
DT tables are interactive with search and pagination!
]

---

# add_video() & add_iframe()

```{r}
content <- create_content() %>%
  add_video(
    src = "https://example.com/video.mp4",
    width = "100%",
    height = "400px"
  ) %>%
  add_iframe(
    src = "https://example.com/embed",
    height = "500px"
  )
```

---

# add_code()

```{r}
content <- create_content() %>%
  add_code(
    code = "library(dashboardr)\ncreate_dashboard(...)",
*   language = "r",
    caption = "Example code"
  )
```

---

# add_quote()

```{r}
content <- create_content() %>%
  add_quote(
    quote = "Data is the new oil.",
    attribution = "Clive Humby",
    cite = "https://example.com/source"
  )
```

---

# add_badge()

```{r}
content <- create_content() %>%
  add_text("Status: ") %>%
  add_badge(text = "Complete", color = "success") %>%
  add_badge(text = "In Progress", color = "warning") %>%
  add_badge(text = "Blocked", color = "danger")
```

---

# add_metric()

```{r}
content <- create_content() %>%
  add_metric(
    value = "1,234",
    title = "Total Users",
    icon = "ph:users-fill",
    color = "blue",
    subtitle = "+12% from last month"
  )
```

---

# Preview Visualizations

```{r}
# Create content with inline data
content <- create_content(data = mtcars) %>%
  add_viz(type = "histogram", x_var = "mpg", title = "MPG") %>%
  add_viz(type = "bar", x_var = "cyl", title = "Cylinders")

# Preview a specific visualization!
*preview(content, index = 1)  # Shows MPG histogram
*preview(content, index = 2)  # Shows Cylinders bar
```

---

# Powered By Footer

```{r}
dashboard <- create_dashboard(...) %>%
  add_page(...) %>%
* add_powered_by_dashboardr(size = "small")
```

Options: `"small"`, `"medium"`, `"large"`

---

# Full Example: Landing Page

```{r}
add_page(
  "Home",
  icon = "ph:house-fill",
  is_landing_page = TRUE,
  text = md_text(
    "# Employee Survey Results {{< iconify ph:sparkle-fill >}}",
    "",
    "Welcome to the **2024 Survey** dashboard.",
    "",
    "## Highlights",
    "",
    "- {{< iconify ph:users-fill >}} **500 respondents**",
    "- {{< iconify ph:chart-line-fill >}} **85% response rate**",
    "- {{< iconify ph:heart-fill >}} **4.2/5 satisfaction**",
    "",
    "[View Analysis â†’](analysis.html)"
  )
)
```

---

# Full Example: Analysis Page

```{r}
add_page(
  "Analysis",
  icon = "ph:chart-bar-fill",
  data = survey_data,
  visualizations = all_viz,
  
  # Loading
  overlay = TRUE,
  overlay_theme = "glass",
  overlay_duration = 1,
  
  # Performance
  lazy_load_charts = TRUE,
  lazy_load_tabs = TRUE,
  
  # Intro text
  text = md_text(
    "## Survey Analysis",
    "",
    "Explore the results below."
  )
)
```

---

# Full Example: Complete Dashboard

```{r}
library(dashboardr)
library(dplyr)

# Data
survey <- data.frame(
  age = sample(18:80, 500, TRUE),
  department = sample(c("Sales", "Engineering", "Marketing"), 500, TRUE),
  satisfaction = sample(1:5, 500, TRUE)
)

# Viz
viz <- create_viz(type = "histogram", color_palette = c("#3498DB")) %>%
  add_viz(x_var = "age", tabgroup = "demo", title = "Age") %>%
  set_tabgroup_labels(list(demo = "{{< iconify ph:users-fill >}} Demographics"))

# Dashboard
dashboard <- create_dashboard(
  title = "Survey Dashboard", output_dir = "survey"
) %>%
  apply_theme(theme_modern()) %>%
  add_page("Home", text = md_text("# Welcome!"), is_landing_page = TRUE) %>%
  add_page("Analysis", data = survey, visualizations = viz)

# Generate
generate_dashboard(dashboard, render = TRUE, open = "browser")
```

---

# Icon Reference

.pull-left[
**Phosphor (`ph:`):**
- `ph:house-fill` - Home
- `ph:chart-bar-fill` - Bar chart
- `ph:chart-line` - Line chart
- `ph:users-fill` - Users
- `ph:heart-fill` - Heart
- `ph:gear-fill` - Settings
- `ph:info-fill` - Info
- `ph:sparkle-fill` - Sparkle
]

.pull-right[
**Bootstrap (`bi:`):**
- `bi:house-fill` - Home
- `bi:graph-up` - Graph
- `bi:people-fill` - People
- `bi:gear-fill` - Gear

**Font Awesome (`fa:`):**
- `fa:chart-bar` - Chart
- `fa:users` - Users
]

Browse all: https://icon-sets.iconify.design/

---

# Theme Parameters Reference

```
navbar_bg_color      # Navbar background
navbar_text_color    # Navbar text
navbar_text_hover_color
mainfont            # Main font family
fontsize            # Base font size
fontcolor           # Body text color
linkcolor           # Link color
monofont            # Code font
monobackgroundcolor # Code background
linestretch         # Line height
backgroundcolor     # Page background
max_width           # Content max width
margin_left/right/top/bottom
```

---

# Input Parameters Reference

```
input_id        # Unique ID (required)
label           # Display label
type            # Input type (required)
filter_var      # Column to filter (required)
options         # Choices
default_selected
placeholder
width           # CSS width
size            # sm, md, lg
help            # Help text below
disabled        # TRUE/FALSE
```

---

# add_viz() Parameters Reference

```
type            # Visualization type
x_var           # X variable
y_var           # Y variable (scatter, heatmap, timeline)
group_var       # Grouping variable
stack_var       # Stack variable
weight_var      # Survey weights

title           # Chart title
subtitle        # Chart subtitle
x_label/y_label # Axis labels

tabgroup        # Tab organization
title_tabset    # Tab label
filter          # Data filter (formula)

color_palette   # Colors
horizontal      # TRUE/FALSE
drop_na_vars    # Remove NA rows
```

---

# Timeline-Specific Parameters

```
time_var          # Time/date column
y_var             # Response variable
chart_type        # "line", "stacked_area"

# Response filtering
y_filter          # Which values to show (e.g., 5:7)
y_filter_combine  # Combine into single line?
y_filter_label    # Custom legend label

# Response binning
y_breaks          # Bin boundaries
y_bin_labels      # Labels for bins
y_levels          # Order of categories

# Time binning
time_breaks       # Time period boundaries
time_bin_labels   # Labels for periods
```

---

class: inverse, center, middle

# Happy Dashboarding! ğŸ“Š

### Questions?

### https://github.com/favstats/dashboardr
